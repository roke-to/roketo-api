{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"getHello","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HelloResponse"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Unauthorized"}}}}},"security":[{"bearer":[]}]}},"/auth/login":{"post":{"operationId":"login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"Issues JWT for accessing all the other endpoints","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessTokenDto"}}}},"400":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequest"}}}}},"tags":["auth"]}},"/users/{accountId}":{"get":{"operationId":"findOne","parameters":[{"name":"accountId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Unauthorized"}}}}},"tags":["users"],"security":[{"bearer":[]}]},"patch":{"operationId":"update","parameters":[{"name":"accountId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"204":{"description":""},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Unauthorized"}}}}},"tags":["users"],"security":[{"bearer":[]}]}},"/users/{accountId}/avatar":{"get":{"operationId":"getAvatarUrl","parameters":[{"name":"accountId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["users"]}},"/users/{accountId}/verifyEmail/{jwt}":{"get":{"operationId":"verifyEmail","parameters":[{"name":"accountId","required":true,"in":"path","schema":{"type":"string"}},{"name":"jwt","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["users"]}},"/users/{accountId}/verifyEmail":{"post":{"operationId":"resendVerificationEmail","parameters":[{"name":"accountId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"201":{"description":""},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Unauthorized"}}}}},"tags":["users"],"security":[{"bearer":[]}]}},"/notifications":{"get":{"operationId":"findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Notification"}}}}}},"tags":["notifications"],"security":[{"bearer":[]}]}},"/notifications/readAll":{"post":{"operationId":"markAllRead","parameters":[],"responses":{"204":{"description":""}},"tags":["notifications"],"security":[{"bearer":[]}]}},"/notifications/{accountId}/unsubscribe/{jwt}":{"get":{"operationId":"unsubscribe","parameters":[{"name":"accountId","required":true,"in":"path","schema":{"type":"string"}},{"name":"jwt","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["notifications"],"security":[{"bearer":[]}]}},"/archive":{"get":{"operationId":"findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Archive"}}}}}}}}},"info":{"title":"Roke.to","description":"The best realtime streaming solution","version":"0.0.1","contact":{}},"tags":[],"servers":[{"url":"https://roketo-test-api.herokuapp.com"}],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"Unauthorized":{"type":"object","properties":{"statusCode":{"type":"number","default":401},"error":{"type":"string","default":"Unauthorized"}},"required":["statusCode","error"]},"HelloResponse":{"type":"object","properties":{"data":{"type":"string"}},"required":["data"]},"LoginDto":{"type":"object","properties":{"accountId":{"type":"string","description":"The accountId of a user."},"timestamp":{"type":"number","description":"Current timestamp."},"signature":{"description":"Signature of timestamp string signed with user's private key in form of an array of 64 integer numbers.","example":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],"type":"array","items":{"type":"number","maximum":255,"minimum":0}}},"required":["accountId","timestamp","signature"]},"AccessTokenDto":{"type":"object","properties":{"accessToken":{"type":"string","description":"JWT to use in bearer authorization"}},"required":["accessToken"]},"BadRequest":{"type":"object","properties":{"statusCode":{"type":"number","default":400},"message":{"description":"Array of error messages","type":"array","items":{"type":"string"}},"error":{"type":"string","default":"Bad request"}},"required":["statusCode","message","error"]},"User":{"type":"object","properties":{"accountId":{"type":"string"},"name":{"type":"string"},"email":{"type":"string"},"isEmailVerified":{"type":"boolean"},"verificationEmailSentAt":{"format":"date-time","type":"string"},"allowNotifications":{"type":"boolean"}},"required":["accountId","name","email","isEmailVerified","verificationEmailSentAt","allowNotifications"]},"UpdateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"The name of a user."},"email":{"type":"string","description":"The email of a user."},"allowNotifications":{"type":"boolean","description":"User's permission for email notifications."}}},"Notification":{"type":"object","properties":{"id":{"type":"string"},"accountId":{"type":"string"},"streamId":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"isRead":{"type":"boolean"},"type":{"type":"string","enum":["StreamStarted","StreamPaused","StreamFinished","StreamIsDue","StreamContinued","StreamCliffPassed","StreamFundsAdded"]},"payload":{"type":"object"}},"required":["id","accountId","streamId","createdAt","isRead","type","payload"]},"Archive":{"type":"object","properties":{"id":{"type":"string"},"accountId":{"type":"string"},"streamId":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"payload":{"type":"object"}},"required":["id","accountId","streamId","createdAt","payload"]}}}}